The functionality of a thread scheduler, in C
